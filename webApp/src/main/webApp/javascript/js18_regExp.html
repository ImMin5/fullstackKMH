<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<script>
	/*
		정규표현식 생성방법
		 
	*/
	
	/*
	var data ="Test1";
	var reg = /a[a-zA-z]{5}/;
	var result = reg.test(data);
	document.write(result);
	*/
	function formCheck(){
		//아이디 유효성 검사
		// ^: 처음부터 검색, $ : 끝까지 검색
		//8-12사이여야하고 , 첫번째 문자는 영어, 나머지 영어, 숫자,
		
		//var reg = /^[a-zA-z]{1}[a-zA-Z0-9_]{7,11}$/;
		var reg = /^[a-zA-z]{1}\w{7,11}$/;
		var userid = document.getElementById("userid");
		console.log(userid);
		
		if(userid.value==""){
			alert("아이디를 입력하세요");
			userid.focus();
			return false;
		}
		if(!reg.test(userid.value)){
			//정규식에 맞으면 true
			alert("아이디를 잘못 입력 하였습니다.");
			userid.focus();
			return false;
		}
		//이름
		reg = /^[가-힣]{2,7}$/;
		var username = document.querySelector("#username");
		
		if(username.value == ""){
			alert("이름을 입력해 주세요!");
			username.focus();
			return false;
		}
		if(!reg.test(username.value)){
			alert("한글 이름을 입력해 주세요(2-7)!");
			username.focus();
			return false;
		}
		
		//주민번호 860214-253658
		var jumin = document.getElementById("jumin1").value+"-"+document.getElementById("jumin2").value;
		reg = /^[0-9]{2}[01][0-9][0-3][0-9][-][0-9]{7}$/;
		console.log(jumin)
		if(!reg.test(jumin)){
			alert("주민번호가 잘못입력되었습니다..");
			document.getElementById("jumin1").focus();
			return false;
		}
		
		//이메일
		var email = document.getElementById("email");
		
		//()? : 있어도되고 없어도 된다.
		reg = /^\w{8,12}[@][a-zA-Z]{2,8}[.][a-zA-Z]{2,4}([.][a-zA-Z]{2,4})?$/;
		if(!reg.test(email.value)){
			alert("이메일을 잘못 입력하였습니다.");
			email.focus();
			return false;
		}
		//전화번호
			
		var tel = document.getElementById("tel1").value+ "-";
		tel += document.getElementById("tel2").value+"-";
		tel += document.getElementById("tel3").value;
		
		//(): 여러개의 값중 1개가 있으면
		reg = /^(010|02|031|032|041|051])[-][0-9]{3,4}[-][0-9]{4}$/;
		console.log(reg.test(tel));
		
		if(!reg.test(tel)){
			alert("올바른 이메일 형식을 입력해 주세요");
			return false;
		}
		
		return true;
	}
	function cursorMove(from,to, cnt){
		var obj = document.getElementById(from).value
		console.log(obj);
		if(obj.length == cnt){
			var j = document.getElementById(to).focus();
		}
		
	}
	
	function cursorMove2(obj){
	
		var j;
		if(obj.name="jumin1" && obj.value.length == 6){
			j = document.getElementById("jumin2")
			j.focus();
		}
		else if(obj.name="jumin2" && obj.value.length==7){
			j = document.getElementById("email");
			j.focus();
		}
		else if(obj.name="tel1" && obj.value.length >=3){
			j = document.getElementById("tel2");
			j.focus();
		}
		else if(obj.name="tel2" && obj.value.length>=3){
			j = document.getElementById("tel3");
			j.focus();
		}

	}
</script>
<body>
<h1> 정규식을 이용한 유요성 검사</h1>
<div>
	<form method="post" action="aaa.jsp" onsubmit="return formCheck();">
		<ul>
			<li>아이디</li>
			<li><input type="text" name="userid" id="userid" value="aaaaaaaaaa"/></li>
			<li>이름</li>
			<li><input type="text" name="username" id="username" value="김민호"/></li>
			<li>주민번호</li>
			<li>
				<input type="text" name="jumin1" id="jumin1" onkeyup="cursorMove('jumin1','jumin2',6)"/>
				<input type="text" name="jumin2" id="jumin2" onkeyup="cursorMove('jumin2','email',7)" maxlength="7"/>
			</li>
			<li>이메일</li>
			<li>
				<input type="text" name="email" id="email" value="rlaalsgh5151@naver.com"/>
			</li>
			<li>연락처</li>
			<li>
				<input type="text"  name="tel1" id="tel1" onkeyup="cursorMove('tel1','tel2',2)"/>
				<input type="text"  name="tel2" id="tel2" onkeyup="cursorMove('tel2','tel3',4)"/>
				<input type="text"  name="tel3" id="tel3"/>
			</li>
			
			<li><input type="submit" value="등록"/></li>
		</ul>
	</form>
</div>
<a href="ex03_calendar.html">달력 보기</a>
</body>
</html>